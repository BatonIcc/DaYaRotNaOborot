{% extends "base.html" %}

{% block content %}
    {% import "macros.html" as  macros %}

    {{ macros.user_navbar(user_data) }}
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="container">
        <div class="profile-container">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è -->
            <div class="profile-header">
                <div class="profile-avatar">
                    <img src="{{ url_for('static', filename='avatars/'+user_data.avatar) }}" alt="–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                </div>
                <div class="profile-info">
                    <h2>{{ current_user.username }}</h2>
                    {% if current_user.role == "tester" %}
                    <span class="user-status status-tester">{{ current_user.role }}</span>
                    {% else %}
                    <span class="user-status status-user">{{ current_user.role }}</span>
                    {% endif %}
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="card mb-4">
                        <div class="card-header">
                            <span>üë§</span> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ñ–∏–ª–µ
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control" value="{{ current_user.email }}" readonly>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">–†–æ–ª—å</label>
                                <input type="text" class="form-control" value="{{ current_user.role }}" readonly>
                            </div>
                        </div>
                    </div>

                    <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–≤ -->
                    <div class="tester-info">
                        <h4>–ö–∞–∫ —Å—Ç–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–º?</h4>
                        <p>–•–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –Ω–æ–≤—ã–º –∏–≥—Ä–∞–º –¥–æ –∏—Ö —Ä–µ–ª–∏–∑–∞ –∏ –ø–æ–º–æ–≥–∞—Ç—å —É–ª—É—á—à–∞—Ç—å –∏—Ö? –°–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º —à–∞–≥–∞–º:</p>
                        <ol>
                            <li>–ò–≥—Ä–∞–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ - –º–∏–Ω–∏–º—É–º 10 —á–∞—Å–æ–≤ –≤ –Ω–µ–¥–µ–ª—é</li>
                            <li>–ù–∞–π–¥–∏—Ç–µ –∏ —Å–æ–æ–±—â–∏—Ç–µ –æ 5 –±–∞–≥–∞—Ö –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–≥—Ä–∞—Ö</li>
                            <li>–ù–∞–ø–∏—à–∏—Ç–µ 3 –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–±–∑–æ—Ä–∞ –Ω–∞ –∏–≥—Ä—ã</li>
                            <li>–ü–æ–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É</li>
                            <li>–î–æ–∂–¥–∏—Ç–µ—Å—å –æ–¥–æ–±—Ä–µ–Ω–∏—è –æ—Ç –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥—ã</li>
                        </ol>
                        <button class="btn btn-primary">–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
                        <form action="" method="post">
                            {{ token_form.hidden_tag() }}
                            <div class="mb-3" style="margin-top: 15px;">
                                {{ macros.render_form(token_form.UserToken, id="token_form", placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω", correct=token_correct) }}

                                {{ token_form.submit(class="btn btn-primary") }}
                            </div>
                        </form>
                    </div>
                </div>

                <!-- –ö–æ–ª–æ–Ω–∫–∞ —Å —Ñ–æ—Ä–º–∞–º–∏ -->
                <div class="col-md-6">
                    <!-- –°–º–µ–Ω–∞ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <span>‚úèÔ∏è</span> –°–º–µ–Ω–∞ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                        </div>
                        <div class="card-body">
                            <form action="" method="post">
                                {{ username_form.hidden_tag() }}
                                <div class="mb-3">
                                    <label class="form-label">–¢–µ–∫—É—â–µ–µ –∏–º—è</label>
                                    <input type="text" class="form-control" value="{{ current_user.username }}" readonly>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">–ù–æ–≤–æ–µ –∏–º—è</label>
                                    {{ macros.render_form(username_form.new_username, id="new_username_form", placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è") }}
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                                    {{ macros.render_form(username_form.password, id="upassword_form", placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å") }}
                                </div>
                                {{ username_form.submit(class="btn btn-primary") }}
                            </form>
                        </div>
                    </div>

                    <!-- –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <span>üîí</span> –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
                        </div>
                        <div class="card-body">
                            <form action="" method="post">
                                {{ password_form.hidden_tag() }}
                                <div class="mb-3">
                                    <label class="form-label">–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                                    {{ macros.render_form(password_form.last_password, id="last_password_form", placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å") }}
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                                    {{ macros.render_form(password_form.new_password, id="new_password_form", placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å") }}
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                                    {{ macros.render_form(password_form.new_password2, id="new_password2_form", placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å") }}
                                </div>
                                {{ password_form.submit(class="btn btn-primary") }}
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}